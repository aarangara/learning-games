<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Subtraction Practice — Guess the Difference</title>
  <style>
    :root {
      --bg: #f6fbff;
      --ink: #0f172a;
      --muted: #64748b;
      --accent: #f97316;
      --accent2: #34d399;
      --card: #ffffff;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      background: radial-gradient(900px 900px at 110% -10%, #ffedd5 0, transparent 60%), var(--bg);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--ink);
      padding: 24px;
    }
    .wrap {
      width: min(720px, 94vw);
      background: var(--card);
      border-radius: 16px;
      box-shadow: 0 12px 30px rgba(0,0,0,.08);
      padding: clamp(18px, 4vw, 28px);
      text-align: center;
    }
    h1 { margin: 0 0 6px; font-size: clamp(22px, 3.6vw, 30px); }
    .muted { color: var(--muted); font-size: 14px; margin: 0 0 14px; }
    .eqn {
      display: inline-flex; align-items: center; gap: clamp(10px, 2.5vw, 24px);
      font-weight: 800; margin: 8px 0 18px;
      font-size: clamp(44px, 9vw, 84px);
    }
    .box {
      min-width: 1.6em; min-height: 1.2em; display: inline-flex; align-items: center; justify-content: center;
      padding: .08em .3em; border-radius: 14px; border: 3px dashed #cbd5e1; background: #f8fafc;
    }
    .revealed { border-style: solid; border-color: #fb923c; background: #fff7ed; color: #9a3412; }
    .controls { display: flex; justify-content: center; gap: 12px; flex-wrap: wrap; }
    button {
      border: 0; cursor: pointer; border-radius: 12px; padding: 14px 20px; font-weight: 800;
      font-size: clamp(16px, 3.4vw, 20px);
    }
    .btn-show { background: var(--accent); color: white; }
    .btn-next { background: var(--accent2); color: #0f172a; }
  </style>
</head>
<body>
  <div class="wrap" role="application" aria-label="Subtraction practice: guess the difference">
    <h1 id="title">Subtraction Practice (up to 100)</h1>
    <p class="muted" id="subtitle">Work out the difference before you reveal it!</p>
    <div class="eqn" aria-live="polite" aria-atomic="true">
      <span id="left" class="num">?</span>
      <span aria-hidden="true">−</span>
      <span id="right" class="num">?</span>
      <span aria-hidden="true">=</span>
      <span id="diff" class="box" aria-label="hidden difference">?</span>
    </div>

    <div class="controls">
      <button class="btn-show" id="show">Show Answer</button>
      <button class="btn-next" id="next">Next</button>
    </div>
  </div>

<script>
  (function () {
    const DEFAULT_MAX = 100;
    const $left = document.getElementById('left');
    const $right = document.getElementById('right');
    const $diff = document.getElementById('diff');
    const $show = document.getElementById('show');
    const $next = document.getElementById('next');
    const $title = document.getElementById('title');
    const $subtitle = document.getElementById('subtitle');

    function parseMaxTotal() {
      const params = new URLSearchParams(window.location.search);
      const maxParam = params.get('max');
      const parsed = parseInt(maxParam, 10);
      if (!Number.isInteger(parsed) || parsed < 1) return DEFAULT_MAX;
      return Math.min(parsed, DEFAULT_MAX);
    }

    const maxTotal = parseMaxTotal();
    const titleLabel = `Subtraction Practice (up to ${maxTotal})`;
    document.title = `Subtraction Practice — Up to ${maxTotal}`;
    $title.textContent = titleLabel;
    $subtitle.textContent = `Numbers start at ${maxTotal} or less with no negative answers.`;

    let left = 0, right = 0, diff = 0, revealed = false;

    function randomInt(maxInclusive) {
      return Math.floor(Math.random() * (maxInclusive + 1));
    }

    function newQuestion() {
      left = randomInt(maxTotal);
      right = randomInt(left); // ensures right <= left
      diff = left - right;

      revealed = false;
      $left.textContent = left;
      $right.textContent = right;
      $diff.textContent = '？';
      $diff.classList.remove('revealed');
      $show.disabled = false;
    }

    function showAnswer() {
      if (revealed) return;
      revealed = true;
      $diff.textContent = diff;
      $diff.classList.add('revealed');
      $show.disabled = true;
    }

    $show.addEventListener('click', showAnswer);
    $next.addEventListener('click', newQuestion);

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') { e.preventDefault(); showAnswer(); }
      if (e.key === ' ') { e.preventDefault(); newQuestion(); }
    });

    newQuestion();
  })();
</script>
</body>
</html>
